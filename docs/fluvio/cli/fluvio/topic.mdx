---
sidebar_position: 10
title: "topic"
description: "Managing Topics in Fluvio CLI"
---

# The `fluvio topic` command

The `fluvio topic` subcommands are used to create and delete topics, as
well as to view basic information about existing topics.

## `fluvio topic create`

This command is used to create new Fluvio topics.

**Example usage**


```bash copy="fl"
$ fluvio topic create greeting
topic "greeting" created
```

### Retention

Retention is a policy for how data is cleaned up from a topic.

* For a time-based policy, use  `--retention-time`
* For a segment-size based policy, use  `--segment-size`

Check [the docs for more info about data retention]

**Example usage**

In this example, the last segment of 500k will be deleted after 30 days.


```bash copy="fl"
$ fluvio topic create my-topic --retention-time '30 days' --segment-size 500000
topic "my-topic" created
```


### Compression

This configuration will set compression at a topic level. When set producers are forced to use a compression algorithm that matches with the topic configuration. The SPU will reject any Produce request
that does not match with the topic configuration.

If `--compression-type any` is used, SPU will accept any compression algorithm.

possible values:
* `any`(default)
* `none`
* `gzip`
* `lz4`
* `snappy`
* `zstd`

**Example usage**


```bash copy="fl"
$ fluvio topic create my-topic --compression-type gzip
topic "my-topic" created
```

In this example, the topic `my-topic` will be created with compression type `gzip`.

### replication assignment

By default, Fluvio will automatically assign replicas to SPUs. However, you can manually assign replicas to SPUs by using the `--replica-assignment` flag.

Please refer to following [replica] sections for detail of replica assignment.

Note that in order to replication assignment to work, you need to have at least 2 SPUs in your cluster.

**Example usage**

In this example, we assign first replica to SPU 0, second replica to SPU 1.
First we create replica assignment file `replica.json`.
```json
[
    {
        "id": 0,
        "replicas": [
            0,
            1
        ]
    }
]
```
The `replicas` fields correspond to the SPU ids.  You can get SPU ids by running `fluvio cluster spu list`.

Then we create topic with replica assignment file.
```bash
$ fluvio topic create my-topic --replica-assignment replica.json
topic "my-topic" created
```

Use partition commands to show that topic has been created with replica assignment.

```bash

 $ fluvio partition list
  TOPIC  PARTITION  LEADER  REPLICAS  RESOLUTION  SIZE  HW  LEO  LRS  FOLLOWER OFFSETS
  my-topic   0          0       [1]       Online      0 B   0   0    0    0     [ReplicaStatus { spu: 1, hw: -1, leo: -1 }]

```

## `fluvio topic list`

This command shows you all the existing topics in your cluster, as well as some basic
information about them, including how many partitions a topic has and how many times it
is replicated.

**Example usage**


```bash copy="fl"
$ fluvio topic list
 NAME      TYPE      PARTITIONS  REPLICAS  IGNORE-RACK  STATUS                   REASON
 greeting  computed      1          1                   resolution::provisioned
```

---

## `fluvio topic describe`

This command prints more detailed information about a specific topic. The table contains partition information. `-s` is used to show system topics.

**Example usage**


```bash copy="fl"
$ fluvio topic describe kv-topic
   Name:kv-topic                
   Type:computed                
   Partition Count:3            
   Replication Factor:1         
   Ignore Rack Assignment:false 
   Status:provisioned           
   Reason:                      
   -----------------            
  TOPIC     PARTITION  LEADER  MIRROR  REPLICAS  RESOLUTION  SIZE   BASE  HW  LEO  LRS  FOLLOWER OFFSETS     
  kv-topic  0          5001            []        Online      532 B  0     4   4    4    0                 [] 
  kv-topic  1          5001            []        Online      0 B    0     0   0    0    0                 [] 
  kv-topic  2          5001            []        Online      507 B  0     5   5    5    0                 [] 

```
**Example system topic**

```bash copy="fl"
$ fluvio topic describe kv-topic
   Name:consumer-offset         
   Type:computed                
   Partition Count:1            
   Replication Factor:1         
   Ignore Rack Assignment:false 
   Status:provisioned           
   Reason:                      
   -----------------            
  TOPIC            PARTITION  LEADER  MIRROR  REPLICAS  RESOLUTION  SIZE  BASE  HW  LEO  LRS  FOLLOWER OFFSETS     
  consumer-offset  0          5001            []        Online      0 B   0     0   0    0    0                 [] 

```

Following is the brief description of the columns.

### Partition Details 

| Column | Description |
| --- | --- |
| **TOPIC** | The name of the topic to which this partition belongs. Each topic can have multiple partitions. |
| **PARTITION** | The numerical ID or index of the partition within its topic (usually starting from 0). |
| **LEADER** | The ID of the SPU (Streaming Processing Unit) that serves as the leader for this partition. The leader handles all read and write operations for the partition. |
| **MIRROR** | Indicates if this partition is mirroring data from another cluster. Shows source cluster information when mirroring is active. |
| **REPLICAS** | List of SPU IDs that maintain copies of this partition's data. Includes both the leader and follower SPUs. |
| **RESOLUTION** | The status of the partition synchronization. Values can include "Online" (fully functional), "Offline", or other states indicating issues. |


### Offset Details

| Column | Description |
| --- | --- |
| **SIZE** | The total size of the log data stored in this partition, typically shown in bytes or with appropriate unit (KB, MB, etc.). |
| **BASE** | The offset of the oldest available record in the partition. Also called the "low watermark". |
| **HW** (High Watermark) | The offset up to which all replicas have successfully replicated data. Represents the last confirmed offset. |
| **LEO** (Log End Offset) | The offset of the last record written to the leader's log. This is the next offset where a new record would be appended. |
| **LRS** (Last Stable Offset) | The latest offset that is considered stable and safe across potential leader changes. |
| **FOLLOWER OFFSETS** | The current replication position for each follower SPU, showing how far behind they might be from the leader. |


More information about the columns HW, LEO, and LRS can be found in the details regarding the [Synchronization Algorithm].


[Synchronization Algorithm]: fluvio/concepts/architecture/replica-election.mdx#synchronization-algorithm

---

## `fluvio topic delete`

This command deletes an existing Fluvio topic and all data associated with it.
This data may not be recovered, so use this with care.

**Example usage**


```bash copy="fl"
$ fluvio topic delete greeting
topic "greeting" deleted
```

## `fluvio topic add-partition`

This command adds a partition to an existing topic.
It will return the partition number and the SPU id where the partition is located.

**Example usage**


```bash copy="fl"
$ fluvio topic add-partition greeting
 PARTITION  SPU
 1          5001
```

You can also specify the number of new partitions to add using the `-c` or `--count` flag.

```bash copy="fl"
$ fluvio topic add-partition greeting -c 3
 PARTITION  SPU
 2          5002
 3          5003
 4          5001
```

[the docs for more info about data retention]: fluvio/concepts/operations/data-retention.mdx
